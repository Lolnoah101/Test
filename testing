local Luna = loadstring(game:HttpGet("https://raw.nebulasoftworks.xyz/luna", true))()

local Window = Luna:CreateWindow({
    Name = "Luna Example Window", -- This Is Title Of Your Window
    Subtitle = nil, -- A Gray Subtitle next To the main title.
    LogoID = "82795327169782", -- The Asset ID of your logo. Set to nil if you do not have a logo for Luna to use.
    LoadingEnabled = true, -- Whether to enable the loading animation. Set to false if you do not want the loading screen or have your own custom one.
    LoadingTitle = "Luna Interface Suite", -- Header for loading screen
    LoadingSubtitle = "by Nebula Softworks", -- Subtitle for loading screen

    ConfigSettings = {
        RootFolder = nil, -- The Root Folder Is Only If You Have A Hub With Multiple Game Scripts and u may remove it. DO NOT ADD A SLASH
        ConfigFolder = "Big Hub" -- The Name Of The Folder Where Luna Will Store Configs For This Script. DO NOT ADD A SLASH
    },

    KeySystem = false, -- As Of Beta 6, Luna Has officially Implemented A Key System!
    KeySettings = {
        Title = "Luna Example Key",
        Subtitle = "Key System",
        Note = "Best Key System Ever! Also, Please Use A HWID Keysystem like Pelican, Luarmor etc. that provide key strings based on your HWID since putting a simple string is very easy to bypass",
        SaveInRoot = false, -- Enabling will save the key in your RootFolder (YOU MUST HAVE ONE BEFORE ENABLING THIS OPTION)
        SaveKey = true, -- The user's key will be saved, but if you change the key, they will be unable to use your script
        Key = {"Example Key"}, -- List of keys that will be accepted by the system, please use a system like Pelican or Luarmor that provide key strings based on your HWID since putting a simple string is very easy to bypass
        SecondAction = {
            Enabled = true, -- Set to false if you do not want a second action,
            Type = "Link", -- Link / Discord.
            Parameter = "" -- If Type is Discord, then put your invite link (DO NOT PUT DISCORD.GG/). Else, put the full link of your key system here.
        }
    }
})

local Tab = Window:CreateTab({
    Name = "Tab Example",
    Icon = "view_in_ar",
    ImageSource = "Material",
    ShowTitle = true -- This will determine whether the big header text in the tab will show
})

Tab:CreateToggle({
   Name = "Auto Click Closest Enemy",
   CurrentValue = false,
   Flag = "AutoClickClosest",
   Callback = function(Value)
      getgenv().AutoClickClosest = Value
      
      if Value then
         task.spawn(function()
            local player = game.Players.LocalPlayer
            local remotes = game:GetService("ReplicatedStorage")
               :WaitForChild("ffrostflame_bridgenet2@1.0.0")
               :WaitForChild("dataRemoteEvent")
            
            while getgenv().AutoClickClosest do
               local success, err = pcall(function()
                  local character = player.Character
                  if not character then return end
                  
                  local hrp = character:FindFirstChild("HumanoidRootPart")
                  if not hrp then return end
                  
                  local enemiesFolder = workspace:FindFirstChild("_ENEMIES")
                  if not enemiesFolder then return end
                  
                  enemiesFolder = enemiesFolder:FindFirstChild("Client")
                  if not enemiesFolder then return end
                  
                  local closestEnemy = nil
                  local closestDistance = math.huge  -- very large number
                  
                  -- Find closest valid enemy
                  for _, enemy in ipairs(enemiesFolder:GetChildren()) do
                     local enemyHrp = enemy:FindFirstChild("HumanoidRootPart") 
                                    or enemy:FindFirstChildWhichIsA("BasePart")  -- fallback
                     
                     if enemyHrp and enemy.Name:match("^[a-f0-9]+$") and #enemy.Name == 32 then
                        local distance = (hrp.Position - enemyHrp.Position).Magnitude
                        
                        if distance < closestDistance then
                           closestDistance = distance
                           closestEnemy = enemy
                        end
                     end
                  end
                  
                  -- If we found a close enemy → click it
                  if closestEnemy then
                     local args = {
                        {
                           {
                              "ClickSystem",
                              "Execute",
                              closestEnemy.Name,   -- ← uses the closest enemy's ID
                              n = 3
                           },
                           "\002"
                        }
                     }
                     remotes:FireServer(unpack(args))
                  end
               end)
               
               if not success then
                  warn("Auto-click error:", err)
               end
               
               task.wait(0.12)  -- ≈8 clicks/sec – adjust: 0.08 = faster, 0.25 = safer
            end
         end)
      end
   end,
})
